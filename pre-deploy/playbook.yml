---
- hosts: all
  become: true
  gather_facts: yes
  name: make nodes ready to deploy
  roles:
    - { role: pre-deploy, tags: ["pre"] }
    - { role: kolla-user, tags: ["kolla-user"] }
    - { role: docker, when: "'localhost' in group_names", tags: ["docker"] }
    - { role: private-registry, when: "'localhost' in group_names", tags: ["reg"] }
    - { role: pre-kolla }
    - { role: nova-presetup }
    - { role: cinder-presetup }
    - { role: glance-presetup }
    - { role: ovn-presetup }
    - { role: fluentd-presetup }
    - { role: cron-presetup }
    - { role: certs-presetup }
